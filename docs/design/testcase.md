# 久期计算系统测试用例

## 文档信息

| 项目名称 | 久期计算系统     |
| ---- | ---------- |
| 文档版本 | V1.0       |
| 创建日期 | 2025-05-19 |
| 状态   | 初稿         |

## 测试范围

本测试用例文档覆盖久期计算系统的以下功能模块：

1. 负债现金流数据导入
2. 折现曲线数据导入
3. 折现因子数据导入
4. 负债现金流汇总及现值计算
5. 负债久期计算
6. 分账户负债现金流现值汇总
7. 分账户负债久期汇总

## 测试环境

- 操作系统：Windows 11
- JDK版本：JDK8
- 前端框架：Vue 2.6.12 + RuoYi 3.8.2
- Java框架：Spring Boot 2.7.18
- 数据库：MySQL 8.0

## 测试用例

### 1. 负债现金流数据导入

#### 用例编号：TC-001

**测试目标**：验证负债现金流数据导入功能是否正常工作

**前置条件**：

1. 系统已部署并正常运行
2. 数据库中已创建负债现金流表(t_dur_liability_cash_flow)
3. 准备好符合格式的Excel文件，包含负债现金流数据

**测试步骤**：

1. 登录系统
2. 进入“负债现金流数据导入”页面
3. 点击“选择文件”按钮，选择准备好的Excel文件
4. 点击“导入”按钮
5. 等待导入完成

**预期结果**：

1. 系统显示“导入成功”的提示信息
2. 数据库中的t_dur_liability_cash_flow表中成功插入数据
3. 导入的数据包含正确的账期、现金流类型、基点类型、设计类型等信息

**测试数据**：

- 测试文件：“liability_cash_flow_sample.xlsx”
- 文件内容包含：账期、现金流类型、基点类型、设计类型、是否为中短期险种、精算代码、业务代码、产品名称、险种主类、险种细类、现金流值集

#### 用例编号：TC-002

**测试目标**：验证负债现金流数据导入对非法格式文件的处理

**前置条件**：

1. 系统已部署并正常运行
2. 数据库中已创建负债现金流表(t_dur_liability_cash_flow)
3. 准备一个格式不符合要求的Excel文件（缺少必要字段或格式错误）

**测试步骤**：

1. 登录系统
2. 进入“负债现金流数据导入”页面
3. 点击“选择文件”按钮，选择格式不符合的Excel文件
4. 点击“导入”按钮

**预期结果**：

1. 系统显示错误提示，指出文件格式不符合要求
2. 数据库中的t_dur_liability_cash_flow表中没有插入新数据

**测试数据**：

- 测试文件：“liability_cash_flow_invalid.xlsx”
- 文件内容缺少必要字段或包含格式错误的数据

### 2. 折现曲线数据导入

#### 用例编号：TC-003

**测试目标**：验证折现曲线数据导入功能是否正常工作

**前置条件**：

1. 系统已部署并正常运行
2. 数据库中已创建折现曲线表(t_dur_discount_curve)
3. 准备好符合格式的Excel文件，包含折现曲线数据

**测试步骤**：

1. 登录系统
2. 进入“折现曲线数据导入”页面
3. 点击“选择文件”按钮，选择准备好的Excel文件
4. 点击“导入”按钮
5. 等待导入完成

**预期结果**：

1. 系统显示“导入成功”的提示信息
2. 数据库中的t_dur_discount_curve表中成功插入数据
3. 导入的数据包含正确的账期、曲线类型、基点类型、久期类型等信息

**测试数据**：

- 测试文件：“discount_curve_sample.xlsx”
- 文件内容包含：账期、曲线类型、基点类型、久期类型、曲线值集

#### 用例编号：TC-004

**测试目标**：验证折现曲线数据导入对非法格式文件的处理

**前置条件**：

1. 系统已部署并正常运行
2. 数据库中已创建折现曲线表(t_dur_discount_curve)
3. 准备一个格式不符合要求的Excel文件

**测试步骤**：

1. 登录系统
2. 进入“折现曲线数据导入”页面
3. 点击“选择文件”按钮，选择格式不符合的Excel文件
4. 点击“导入”按钮

**预期结果**：

1. 系统显示错误提示，指出文件格式不符合要求
2. 数据库中的t_dur_discount_curve表中没有插入新数据

**测试数据**：

- 测试文件：“discount_curve_invalid.xlsx”
- 文件内容缺少必要字段或包含格式错误的数据

### 3. 折现因子数据导入

#### 用例编号：TC-005

**测试目标**：验证折现因子数据导入功能是否正常工作

**前置条件**：

1. 系统已部署并正常运行
2. 数据库中已创建折现因子表(t_dur_discount_factor)
3. 准备好符合格式的Excel文件，包含折现因子数据

**测试步骤**：

1. 登录系统
2. 进入“折现因子数据导入”页面
3. 点击“选择文件”按钮，选择准备好的Excel文件
4. 点击“导入”按钮
5. 等待导入完成

**预期结果**：

1. 系统显示“导入成功”的提示信息
2. 数据库中的t_dur_discount_factor表中成功插入数据
3. 导入的数据包含正确的账期、因子类型、基点类型、久期类型等信息

**测试数据**：

- 测试文件：“discount_factor_sample.xlsx”
- 文件内容包含：账期、因子类型、基点类型、久期类型、因子值集

#### 用例编号：TC-006

**测试目标**：验证折现因子数据导入对非法格式文件的处理

**前置条件**：

1. 系统已部署并正常运行
2. 数据库中已创建折现因子表(t_dur_discount_factor)
3. 准备一个格式不符合要求的Excel文件

**测试步骤**：

1. 登录系统
2. 进入“折现因子数据导入”页面
3. 点击“选择文件”按钮，选择格式不符合的Excel文件
4. 点击“导入”按钮

**预期结果**：

1. 系统显示错误提示，指出文件格式不符合要求
2. 数据库中的t_dur_discount_factor表中没有插入新数据

**测试数据**：

- 测试文件：“discount_factor_invalid.xlsx”
- 文件内容缺少必要字段或包含格式错误的数据

### 4. 负债现金流汇总及现值计算

#### 用例编号：TC-007

**测试目标**：验证负债现金流汇总及现值计算功能是否正常工作

**前置条件**：

1. 系统已部署并正常运行
2. 数据库中已创建相关表：t_dur_liability_cash_flow、t_dur_discount_factor、t_dur_liability_cash_flow_summary
3. 负债现金流表中已存在测试数据
4. 折现因子表中已存在测试数据

**测试步骤**：

1. 登录系统
2. 进入“负债现金流汇总及现值计算”页面
3. 选择账期（如“202307”）
4. 点击“计算”按钮
5. 等待计算完成

**预期结果**：

1. 系统显示“计算成功”的提示信息
2. 数据库中的t_dur_liability_cash_flow_summary表中成功插入汇总数据
3. 汇总数据包含正确的账期、现金流类型、基点类型、久期类型、设计类型、是否为中短期险种等信息
4. 现金流值集和现金流现值值集数据正确

**测试数据**：

- 账期：202307
- 测试数据包含不同的现金流类型、基点类型、久期类型、设计类型、是否为中短期险种等组合

#### 用例编号：TC-008

**测试目标**：验证负债现金流汇总及现值计算对特殊情况的处理

**前置条件**：

1. 系统已部署并正常运行
2. 数据库中已创建相关表：t_dur_liability_cash_flow、t_dur_discount_factor、t_dur_liability_cash_flow_summary
3. 负债现金流表中已存在包含特殊情况的测试数据（如现金流值为0或负值）
4. 折现因子表中已存在测试数据

**测试步骤**：

1. 登录系统
2. 进入“负债现金流汇总及现值计算”页面
3. 选择账期（如“202307”）
4. 点击“计算”按钮
5. 等待计算完成

**预期结果**：

1. 系统显示“计算成功”的提示信息
2. 数据库中的t_dur_liability_cash_flow_summary表中成功插入汇总数据
3. 即使存在现金流值为0或负值的情况，系统也能正确处理并计算出现值
4. 对于现金流值为0的情况，其现值也为0

**测试数据**：

- 账期：202307
- 测试数据包含现金流值为0或负值的特殊情况

#### 用例编号：TC-009

**测试目标**：验证负债现金流汇总及现值计算对缺失数据的处理

**前置条件**：

1. 系统已部署并正常运行
2. 数据库中已创建相关表：t_dur_liability_cash_flow、t_dur_discount_factor、t_dur_liability_cash_flow_summary
3. 选择一个没有负债现金流数据或折现因子数据的账期

**测试步骤**：

1. 登录系统
2. 进入“负债现金流汇总及现值计算”页面
3. 选择没有数据的账期（如“202308”）
4. 点击“计算”按钮

**预期结果**：

1. 系统显示错误提示，指出所选账期缺少必要的数据
2. 数据库中的t_dur_liability_cash_flow_summary表中没有插入新数据

**测试数据**：

- 账期：202308（没有相关数据的账期）

### 5. 负债久期计算

#### 用例编号：TC-010

**测试目标**：验证修正久期计算功能是否正常工作

**前置条件**：

1. 系统已部署并正常运行
2. 数据库中已创建相关表：t_dur_liability_cash_flow_summary、t_dur_discount_curve、t_dur_discount_factor、t_dur_liability_duration_summary
3. 负债现金流汇总表中已存在测试数据（包含修正久期类型的数据）
4. 折现曲线表和折现因子表中已存在测试数据

**测试步骤**：

1. 登录系统
2. 进入“负债久期计算”页面
3. 选择账期（如“202307”）
4. 选择久期类型（“修正久期”）
5. 点击“计算”按钮
6. 等待计算完成

**预期结果**：

1. 系统显示“计算成功”的提示信息
2. 数据库中的t_dur_liability_duration_summary表中成功插入修正久期数据
3. 久期数据包含正确的账期、现金流类型、久期类型、设计类型、是否为中短期险种等信息
4. 久期值集数据正确，与预期的计算结果一致

**测试数据**：

- 账期：202307
- 久期类型：修正久期
- 测试数据包含不同的现金流类型、设计类型、是否为中短期险种等组合

#### 用例编号：TC-011

**测试目标**：验证有效久期计算功能是否正常工作

**前置条件**：

1. 系统已部署并正常运行
2. 数据库中已创建相关表：t_dur_liability_cash_flow_summary、t_dur_discount_curve、t_dur_discount_factor、t_dur_liability_duration_summary
3. 负债现金流汇总表中已存在测试数据（包含有效久期类型的数据，以及+50bp、-50bp、和0bp的基点类型）
4. 折现曲线表和折现因子表中已存在测试数据

**测试步骤**：

1. 登录系统
2. 进入“负债久期计算”页面
3. 选择账期（如“202307”）
4. 选择久期类型（“有效久期”）
5. 点击“计算”按钮
6. 等待计算完成

**预期结果**：

1. 系统显示“计算成功”的提示信息
2. 数据库中的t_dur_liability_duration_summary表中成功插入有效久期数据
3. 久期数据包含正确的账期、现金流类型、久期类型、设计类型、是否为中短期险种等信息
4. 久期值集数据正确，与预期的计算结果一致

**测试数据**：

- 账期：202307
- 久期类型：有效久期
- 测试数据包含不同的现金流类型、设计类型、是否为中短期险种等组合，以及+50bp、-50bp、和0bp的基点类型

#### 用例编号：TC-012

**测试目标**：验证负债久期计算对特殊情况的处理

**前置条件**：

1. 系统已部署并正常运行
2. 数据库中已创建相关表：t_dur_liability_cash_flow_summary、t_dur_discount_curve、t_dur_discount_factor、t_dur_liability_duration_summary
3. 负债现金流汇总表中已存在包含特殊情况的测试数据（如现金流现值为0）
4. 折现曲线表和折现因子表中已存在测试数据

**测试步骤**：

1. 登录系统
2. 进入“负债久期计算”页面
3. 选择账期（如“202307”）
4. 选择久期类型（“修正久期”或“有效久期”）
5. 点击“计算”按钮
6. 等待计算完成

**预期结果**：

1. 系统显示“计算成功”的提示信息
2. 数据库中的t_dur_liability_duration_summary表中成功插入久期数据
3. 对于现金流现值为0的情况，其久期值也为0
4. 系统能正确处理特殊情况，不会出现异常

**测试数据**：

- 账期：202307
- 久期类型：修正久期或有效久期
- 测试数据包含现金流现值为0的特殊情况

### 6. 分账户负债现金流现值汇总

#### 用例编号：TC-013

**测试目标**：验证分账户负债现金流现值汇总功能是否正常工作

**前置条件**：

1. 系统已部署并正常运行
2. 数据库中已创建相关表：t_dur_liability_cash_flow_summary、t_dur_sub_account_liability_present_value
3. 负债现金流汇总表中已存在测试数据（包含不同的设计类型和是否为中短期险种组合）

**测试步骤**：

1. 登录系统
2. 进入“分账户负债现金流现值汇总”页面
3. 选择账期（如“202307”）
4. 点击“计算”按钮
5. 等待计算完成

**预期结果**：

1. 系统显示“计算成功”的提示信息
2. 数据库中的t_dur_sub_account_liability_present_value表中成功插入汇总数据
3. 汇总数据包含正确的账期、现金流类型、基点类型、久期类型、设计类型等信息
4. 分账户负债现金流现值值集数据正确，与预期的计算结果一致

**测试数据**：

- 账期：202307
- 测试数据包含不同的现金流类型、基点类型、久期类型、设计类型等组合

#### 用例编号：TC-014

**测试目标**：验证分账户负债现金流现值汇总对特殊情况的处理

**前置条件**：

1. 系统已部署并正常运行
2. 数据库中已创建相关表：t_dur_liability_cash_flow_summary、t_dur_sub_account_liability_present_value
3. 负债现金流汇总表中已存在包含特殊情况的测试数据（如现金流现值为0或负值）

**测试步骤**：

1. 登录系统
2. 进入“分账户负债现金流现值汇总”页面
3. 选择账期（如“202307”）
4. 点击“计算”按钮
5. 等待计算完成

**预期结果**：

1. 系统显示“计算成功”的提示信息
2. 数据库中的t_dur_sub_account_liability_present_value表中成功插入汇总数据
3. 即使存在现金流现值为0或负值的情况，系统也能正确处理并计算出汇总值

**测试数据**：

- 账期：202307
- 测试数据包含现金流现值为0或负值的特殊情况

### 7. 分账户负债久期汇总

#### 用例编号：TC-015

**测试目标**：验证分账户负债久期汇总功能是否正常工作

**前置条件**：

1. 系统已部署并正常运行
2. 数据库中已创建相关表：t_dur_liability_duration_summary、t_dur_sub_account_liability_duration
3. 负债久期汇总表中已存在测试数据（包含不同的设计类型和是否为中短期险种组合）

**测试步骤**：

1. 登录系统
2. 进入“分账户负债久期汇总”页面
3. 选择账期（如“202307”）
4. 选择久期类型（“修正久期”）
5. 点击“计算”按钮
6. 等待计算完成

**预期结果**：

1. 系统显示“计算成功”的提示信息
2. 数据库中的t_dur_sub_account_liability_duration表中成功插入汇总数据
3. 汇总数据包含正确的账期、现金流类型、久期类型、设计类型等信息
4. 久期值集数据正确，与预期的计算结果一致

**测试数据**：

- 账期：202307
- 久期类型：修正久期
- 测试数据包含不同的现金流类型、设计类型等组合

#### 用例编号：TC-016

**测试目标**：验证分账户负债久期汇总功能对有效久期的处理

**前置条件**：

1. 系统已部署并正常运行
2. 数据库中已创建相关表：t_dur_liability_duration_summary、t_dur_sub_account_liability_duration
3. 负债久期汇总表中已存在测试数据（包含有效久期类型的数据）

**测试步骤**：

1. 登录系统
2. 进入“分账户负债久期汇总”页面
3. 选择账期（如“202307”）
4. 选择久期类型（“有效久期”）
5. 点击“计算”按钮
6. 等待计算完成

**预期结果**：

1. 系统显示“计算成功”的提示信息
2. 数据库中的t_dur_sub_account_liability_duration表中成功插入汇总数据
3. 汇总数据包含正确的账期、现金流类型、久期类型、设计类型等信息
4. 久期值集数据正确，与预期的计算结果一致

**测试数据**：

- 账期：202307
- 久期类型：有效久期
- 测试数据包含不同的现金流类型、设计类型等组合

### 8. 特殊情况和边界条件测试

#### 用例编号：TC-017

**测试目标**：验证系统对大数据量的处理能力

**前置条件**：

1. 系统已部署并正常运行
2. 数据库中已创建相关表
3. 准备大量测试数据（如包含1000条记录的负债现金流数据）

**测试步骤**：

1. 登录系统
2. 导入大量测试数据
3. 执行负债现金流汇总及现值计算
4. 执行负债久期计算
5. 执行分账户负债现金流现值汇总
6. 执行分账户负债久期汇总

**预期结果**：

1. 系统能够正常处理大量数据，不出现内存溢出或崩溃
2. 计算结果正确，与预期一致
3. 系统响应时间在可接受范围内（如小于5分钟）

**测试数据**：

- 大量测试数据（如包含1000条记录的负债现金流数据）

#### 用例编号：TC-018

**测试目标**：验证系统对数据精度的处理

**前置条件**：

1. 系统已部署并正常运行
2. 数据库中已创建相关表
3. 准备包含高精度数值的测试数据（如小数点后多位数的现金流值）

**测试步骤**：

1. 登录系统
2. 导入包含高精度数值的测试数据
3. 执行负债现金流汇总及现值计算
4. 执行负债久期计算

**预期结果**：

1. 系统能够正常处理高精度数值
2. 计算结果的精度符合要求（小数点后8位）
3. 四舍五入的处理正确

**测试数据**：

- 包含高精度数值的测试数据（如小数点后多位数的现金流值）

#### 用例编号：TC-019

**测试目标**：验证系统对并发计算的处理

**前置条件**：

1. 系统已部署并正常运行
2. 数据库中已创建相关表
3. 准备多个账期的测试数据

**测试步骤**：

1. 登录系统
2. 同时打开多个浏览器窗口
3. 在不同窗口中选择不同账期并同时执行计算操作

**预期结果**：

1. 系统能够正常处理并发计算请求
2. 每个计算操作的结果正确，不受其他并发操作的影响
3. 系统不出现死锁或数据不一致的情况

**测试数据**：

- 多个账期的测试数据（如202307、202308等）

## 测试执行计划

| 测试用例编号 | 测试用例名称             | 测试优先级 | 测试人员 | 计划测试日期 | 测试状态 |
| ------ | ------------------ | ----- | ---- | ------ | ---- |
| TC-001 | 负债现金流数据导入正常测试      | 高     |      |        | 未执行  |
| TC-002 | 负债现金流数据导入异常测试      | 高     |      |        | 未执行  |
| TC-003 | 折现曲线数据导入正常测试       | 高     |      |        | 未执行  |
| TC-004 | 折现曲线数据导入异常测试       | 高     |      |        | 未执行  |
| TC-005 | 折现因子数据导入正常测试       | 高     |      |        | 未执行  |
| TC-006 | 折现因子数据导入异常测试       | 高     |      |        | 未执行  |
| TC-007 | 负债现金流汇总及现值计算正常测试   | 高     |      |        | 未执行  |
| TC-008 | 负债现金流汇总及现值计算特殊情况测试 | 中     |      |        | 未执行  |
| TC-009 | 负债现金流汇总及现值计算缺失数据测试 | 中     |      |        | 未执行  |
| TC-010 | 修正久期计算正常测试         | 高     |      |        | 未执行  |
| TC-011 | 有效久期计算正常测试         | 高     |      |        | 未执行  |
| TC-012 | 负债久期计算特殊情况测试       | 中     |      |        | 未执行  |
| TC-013 | 分账户负债现金流现值汇总正常测试   | 高     |      |        | 未执行  |
| TC-014 | 分账户负债现金流现值汇总特殊情况测试 | 中     |      |        | 未执行  |
| TC-015 | 分账户负债久期汇总正常测试      | 高     |      |        | 未执行  |
| TC-016 | 分账户负债久期汇总有效久期测试    | 高     |      |        | 未执行  |
| TC-017 | 大数据量测试             | 中     |      |        | 未执行  |
| TC-018 | 数据精度测试             | 高     |      |        | 未执行  |
| TC-019 | 并发计算测试             | 中     |      |        | 未执行  |

## 测试环境准备

### 测试数据准备

1. 负债现金流数据：准备符合格式的Excel文件，包含账期、现金流类型、基点类型、设计类型等信息
2. 折现曲线数据：准备符合格式的Excel文件，包含账期、曲线类型、基点类型、久期类型等信息
3. 折现因子数据：准备符合格式的Excel文件，包含账期、因子类型、基点类型、久期类型等信息
4. 异常测试数据：准备格式不符合要求的Excel文件，用于测试系统对异常情况的处理
5. 大数据量测试数据：准备包含大量记录的测试数据，用于测试系统的性能

### 测试环境配置

1. 硬件环境：
   
   - CPU：至少8核心
   - 内存：至少16GB
   - 硬盘：至少100GB可用空间

2. 软件环境：
   
   - 操作系统：Windows 11
   - JDK版本：JDK8
   - 数据库：MySQL 8.0
   - 浏览器：Chrome最新版或Edge最新版

3. 网络环境：
   
   - 内网环境，网络速度至少100Mbps

## 测试风险与缓解措施

| 风险描述                  | 风险级别 | 缓解措施                                                       |
| --------------------- | ---- | ---------------------------------------------------------- |
| 大数据量计算可能导致系统响应缓慢或内存溢出 | 高    | 1. 分批次处理数据<br>2. 增加系统内存配置<br>3. 优化算法和数据库查询                 |
| 数据精度计算可能存在误差          | 高    | 1. 使用BigDecimal类型进行计算<br>2. 设置适当的精度和舍入模式<br>3. 与手动计算结果进行比对 |
| 并发计算可能导致数据不一致或死锁      | 中    | 1. 实现适当的锁机制<br>2. 使用事务管理<br>3. 设置并发计算限制                    |
| 特殊数据值（如零或负值）可能导致计算异常  | 中    | 1. 增加边界条件处理<br>2. 完善异常处理机制<br>3. 全面测试特殊数据值的情况              |

## 测试成功标准

1. 所有高优先级的测试用例必须全部通过
2. 中优先级的测试用例通过率不低于90%
3. 所有发现的严重缺陷必须修复
4. 系统在大数据量测试中的响应时间必须在可接受范围内
5. 数据精度计算结果必须符合要求

## 测试报告模板

### 测试用例执行结果

| 测试用例编号 | 测试用例名称 | 测试结果  | 缺陷描述 | 备注  |
| ------ | ------ | ----- | ---- | --- |
| TC-XXX | XXX    | 通过/失败 |      |     |

### 缺陷汇总

| 缺陷ID    | 缺陷描述 | 严重程度     | 相关测试用例 | 状态      | 备注  |
| ------- | ---- | -------- | ------ | ------- | --- |
| BUG-XXX | XXX  | 严重/一般/轻微 | TC-XXX | 待修复/已修复 |     |

### 测试结论

在此处提供对测试结果的总体评估和建议。
